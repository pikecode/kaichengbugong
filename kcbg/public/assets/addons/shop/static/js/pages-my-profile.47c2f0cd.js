(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-my-profile"],{"0bb2":function(e,a,t){var r=t("24fb");a=r(!1),a.push([e.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.avatar-wrapper[data-v-3723072c]{width:100%;height:%?70?%;border-radius:%?10?%;padding:0;margin-left:unset;text-align:left;background:none;border:none}.avatar-wrapper[data-v-3723072c]::after{border:none}.avatar-wrapper .avatar[data-v-3723072c]{width:%?70?%;height:%?70?%;border-radius:%?10?%}.avatar-wrapper .avatar[data-v-3723072c]::after{border:1px solid #ccc}',""]),e.exports=a},3573:function(e,a,t){"use strict";t.r(a);var r=t("d042"),n=t("7a2b");for(var u in n)["default"].indexOf(u)<0&&function(e){t.d(a,e,(function(){return n[e]}))}(u);t("5137");var i=t("f0c5"),o=Object(i["a"])(n["default"],r["b"],r["c"],!1,null,"3723072c",null,!1,r["a"],void 0);a["default"]=o.exports},5137:function(e,a,t){"use strict";var r=t("a8b3"),n=t.n(r);n.a},"7a2b":function(e,a,t){"use strict";t.r(a);var r=t("d34b"),n=t.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){t.d(a,e,(function(){return r[e]}))}(u);a["default"]=n.a},a8b3:function(e,a,t){var r=t("0bb2");r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var n=t("4f06").default;n("312dbf26",r,!0,{sourceMap:!1,shadowMode:!1})},d042:function(e,a,t){"use strict";t.d(a,"b",(function(){return n})),t.d(a,"c",(function(){return u})),t.d(a,"a",(function(){return r}));var r={faNavbar:t("a678").default,uForm:t("28f0").default,uFormItem:t("63ba").default,uImage:t("b771").default,uInput:t("fa0e").default,uButton:t("3051").default,faTabbar:t("4d88").default},n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-uni-view",[t("fa-navbar",{attrs:{title:"个人资料"}}),t("v-uni-view",{staticClass:"u-p-30"},[t("u-form",{ref:"uForm",attrs:{model:e.form}},[t("u-form-item",{attrs:{"label-position":e.labelPosition,label:"头像:",prop:"avatar","label-width":"150"}},[t("u-image",{attrs:{width:"70",height:"70",src:e.url||e.userInfo.avatar},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.chooseAvatar.apply(void 0,arguments)}}})],1),t("u-form-item",{attrs:{label:"用户名:",prop:"username","label-width":"150"}},[t("u-input",{model:{value:e.form.username,callback:function(a){e.$set(e.form,"username",a)},expression:"form.username"}})],1),t("u-form-item",{attrs:{label:"昵称:",prop:"nickname","label-width":"150"}},[t("v-uni-input",{attrs:{type:"nickname",placeholder:"请输入昵称"},on:{change:function(a){arguments[0]=a=e.$handleEvent(a),e.onInput.apply(void 0,arguments)}},model:{value:e.form.nickname,callback:function(a){e.$set(e.form,"nickname",a)},expression:"form.nickname"}})],1),t("u-form-item",{attrs:{label:"个人介绍:",prop:"bio","label-width":"150"}},[t("u-input",{attrs:{type:"textarea"},model:{value:e.form.bio,callback:function(a){e.$set(e.form,"bio",a)},expression:"form.bio"}})],1)],1),t("v-uni-view",{staticClass:"u-p-30"},[t("u-button",{attrs:{type:"primary","hover-class":"none","custom-style":{backgroundColor:e.theme.bgColor,color:e.theme.color}},on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.submit.apply(void 0,arguments)}}},[e._v("提交")])],1)],1),t("fa-tabbar")],1)},u=[]},d34b:function(e,a,t){"use strict";t("7a82");var r=t("4ea4").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=r(t("c7eb")),u=r(t("1da1"));t("c975");var i=t("b5c3"),o={mixins:[i.avatar],computed:{userInfo:function(){return this.vuex_user.avatar&&-1==this.vuex_user.avatar.indexOf("data:image/svg+xml;base64")&&(this.form.avatar=this.vuex_user.avatar),this.form.username=this.vuex_user.username||"",this.form.nickname=""==this.vuex_user.nickname||"微信用户"==this.vuex_user.nickname?"":this.vuex_user.nickname,this.form.bio=this.vuex_user.bio,this.vuex_user}},onShow:function(){uni.$off("uAvatarCropper",this.upload)},onReady:function(){this.$refs.uForm.setRules(this.rules)},data:function(){return{labelPosition:"left",url:"",form:{avatar:"",username:"",nickname:"",bio:""},rules:{nickname:[{required:!0,message:"请输入用户名",trigger:"blur"},{required:!0,message:"请输入昵称",trigger:"blur"}]}}},methods:{onChooseAvatar:function(e){var a=this;this.$api.goUpload({filePath:e.detail.avatarUrl,name:"file"}).then((function(e){a.url=e.data.fullurl,a.form.avatar=a.url}))},onInput:function(e){this.form.nickname=e.detail.value},submit:function(){var e=this;this.$refs.uForm.validate(function(){var a=(0,u.default)((0,n.default)().mark((function a(t){var r;return(0,n.default)().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t){a.next=8;break}return a.next=3,e.$api.getUserProfile(e.form);case 3:r=a.sent,e.$u.toast(r.msg),r.code&&setTimeout((function(){e.$u.route("/pages/my/my")}),800),a.next=9;break;case 8:case 9:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())}}};a.default=o}}]);