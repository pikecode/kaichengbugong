# å•†å“è¯¦æƒ…é¡µ - æº¯æºè§†é¢‘åŠŸèƒ½åˆ†æ

## ğŸ“„ æ–‡æ¡£ä¿¡æ¯

- **æ–‡ä»¶è·¯å¾„ï¼š** `cwlsuniapp/pages/goods/detail.vue`
- **åŠŸèƒ½æ¨¡å—ï¼š** å•†å“æº¯æºè§†é¢‘å›æ”¾
- **åˆ›å»ºæ—¥æœŸï¼š** 2026å¹´2æœˆ5æ—¥
- **æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

å•†å“è¯¦æƒ…é¡µåŒ…å«"å•†å“æº¯æº"å’Œ"ç²¾å½©ç¬é—´"ä¸¤ä¸ªè§†é¢‘å›æ”¾åŠŸèƒ½ï¼Œç”¨æˆ·å¯ä»¥ï¼š
1. é€‰æ‹©å•†å“çš„ç”Ÿäº§æ—¥æœŸ
2. æŸ¥çœ‹è¯¥æ—¥æœŸä¸‹çš„æº¯æºè§†é¢‘æˆ–ç²¾å½©ç¬é—´
3. ç‚¹å‡»è§†é¢‘å¡ç‰‡è¿›è¡Œå›æ”¾

---

## ğŸ“Š æ ¸å¿ƒæ•°æ®ç»“æ„

### 1. Tab æ ‡ç­¾é…ç½®

**ä½ç½®ï¼š** line 414

```javascript
list: ['å•†å“æº¯æº', 'ç²¾å½©ç¬é—´']
```

**è¯´æ˜ï¼š**
- ç´¢å¼• 0 = "å•†å“æº¯æº"
- ç´¢å¼• 1 = "ç²¾å½©ç¬é—´"
- é€šè¿‡ `curNow` å˜é‡æ§åˆ¶å½“å‰é€‰ä¸­çš„ tab

### 2. æ•°æ®çŠ¶æ€å®šä¹‰

```javascript
data() {
    return {
        id: '',              // å•†å“IDï¼ˆä»è·¯ç”±å‚æ•°è·å–ï¼‰
        curNow: 0,          // å½“å‰tabç´¢å¼• (0=å•†å“æº¯æº, 1=ç²¾å½©ç¬é—´)
        videoList: [],      // è§†é¢‘åˆ—è¡¨æ•°æ®
        datearr: [],        // æ—¥æœŸæ•°ç»„ï¼ˆåŒ…å«å¯é€‰æ—¥æœŸï¼‰
        riindex: 3,         // å½“å‰é€‰ä¸­çš„æ—¥æœŸç´¢å¼•ï¼ˆé»˜è®¤ç¬¬4ä¸ªï¼‰
        dy: "2024-10",      // å½“å‰å¹´æœˆæ˜¾ç¤ºï¼ˆæ ¼å¼ï¼šYYYY-MMï¼‰
        riqishow: false,    // æ—¥å†å¼¹çª—æ˜¾ç¤ºçŠ¶æ€
        list: ['å•†å“æº¯æº', 'ç²¾å½©ç¬é—´']
    }
}
```

### 3. è§†é¢‘æ•°æ®ç»“æ„

ä»æ¨¡æ¿ä»£ç ï¼ˆline 107-133ï¼‰å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªè§†é¢‘å¯¹è±¡åŒ…å«ï¼š

```javascript
{
    tag: "æ ‡ç­¾æ–‡æœ¬",           // è§†é¢‘æ ‡ç­¾ï¼ˆå¦‚"å…³é”®èŠ‚ç‚¹"ï¼‰
    title: "è§†é¢‘æ ‡é¢˜",         // è§†é¢‘æ ‡é¢˜
    shichang: "00:05:30",     // æ’­æ”¾æ—¶é•¿
    s_time: "08:00",          // å¼€å§‹æ—¶é—´
    e_time: "08:30",          // ç»“æŸæ—¶é—´
    liangdian: "äº®ç‚¹æè¿°",     // è§†é¢‘äº®ç‚¹è¯´æ˜
    video_url: "è§†é¢‘åœ°å€"      // è§†é¢‘æ–‡ä»¶URL
}
```

### 4. æ—¥æœŸæ•°æ®ç»“æ„

ä»ä»£ç ï¼ˆline 97-100ï¼‰å¯ä»¥çœ‹å‡ºï¼Œæ¯ä¸ªæ—¥æœŸå¯¹è±¡åŒ…å«ï¼š

```javascript
{
    txt: "å‘¨ä¸€",              // æ˜ŸæœŸæ–‡æœ¬
    day: "15",               // æ—¥æœŸæ•°å­—
    riqi: "2024-10-15"       // å®Œæ•´æ—¥æœŸï¼ˆç”¨äºAPIè¯·æ±‚ï¼‰
}
```

---

## ğŸ”„ æ•°æ®è·å–æµç¨‹

### æµç¨‹å›¾

```
é¡µé¢åŠ è½½ (onLoad)
    â†“
è·å–å•†å“ID
    â†“
è°ƒç”¨ getGoodsInfo() â”€â”€â†’ è·å–å•†å“åŸºæœ¬ä¿¡æ¯
    â†“
è°ƒç”¨ getDateList('') â”€â”€â†’ è·å–æ—¥æœŸåˆ—è¡¨
    â†“
    â”œâ”€ ä¿å­˜åˆ° datearr
    â””â”€ è‡ªåŠ¨è°ƒç”¨ getVideoList()
           â†“
           â”œâ”€ å‚æ•°ï¼šdateï¼ˆé€‰ä¸­æ—¥æœŸï¼‰
           â”œâ”€ å‚æ•°ï¼štypeï¼ˆtabç±»å‹ï¼‰
           â””â”€ å‚æ•°ï¼šgoods_idï¼ˆå•†å“IDï¼‰
                â†“
           ä¿å­˜åˆ° videoList
                â†“
           æ¸²æŸ“è§†é¢‘åˆ—è¡¨
```

### è¯¦ç»†æ­¥éª¤

#### **æ­¥éª¤1ï¼šé¡µé¢åˆå§‹åŒ–**

**ä½ç½®ï¼š** line 342-358

```javascript
onLoad(e) {
    // 1. è·å–å•†å“IDï¼ˆæ”¯æŒå¤šç§å‚æ•°åï¼‰
    this.id = e.id || e.goods_id || '';

    // 2. å¤„ç†åˆ†äº«åœºæ™¯å‚æ•°
    let invite_id = e.invite_id || '';
    if (e.scene) {
        const scene = decodeURIComponent(e.scene);
        let goods_id = this.$util.getQueryString('goods_id', scene);
        if (goods_id) {
            this.id = goods_id;
        }
        invite_id = this.$util.getQueryString('invite_id', scene) || invite_id;
    }

    // 3. ä¿å­˜é‚€è¯·äººID
    if (invite_id) {
        this.$u.vuex('vuex_invite_id', invite_id);
    }

    // 4. è·å–å•†å“ä¿¡æ¯
    this.getGoodsInfo();

    // 5. è·å–æ—¥æœŸåˆ—è¡¨ï¼ˆåˆå§‹åŒ–ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œè·å–å½“å‰æœˆä»½ï¼‰
    this.getDateList('');
}
```

#### **æ­¥éª¤2ï¼šè·å–æ—¥æœŸåˆ—è¡¨**

**ä½ç½®ï¼š** line 453-459

```javascript
getDateList(date) {
    // è°ƒç”¨APIè·å–æ—¥æœŸåˆ—è¡¨
    this.$api.getdateList({ date: date }).then(res => {
        // ä¿å­˜æ—¥æœŸæ•°ç»„
        this.datearr = res.data;

        // è‡ªåŠ¨è·å–è§†é¢‘åˆ—è¡¨
        this.getVideoList();
    });
}
```

**API æ¥å£ï¼š** `getdateList`

**è¯·æ±‚å‚æ•°ï¼š**
```javascript
{
    date: ""  // å¹´æœˆå­—ç¬¦ä¸²ï¼Œå¦‚ "2024-10"ï¼Œç©ºå­—ç¬¦ä¸²è¡¨ç¤ºå½“å‰æœˆä»½
}
```

**è¿”å›æ•°æ®ï¼š**
```javascript
{
    code: 1,
    data: [
        { txt: "å‘¨ä¸€", day: "15", riqi: "2024-10-15" },
        { txt: "å‘¨äºŒ", day: "16", riqi: "2024-10-16" },
        // ...æ›´å¤šæ—¥æœŸ
    ]
}
```

#### **æ­¥éª¤3ï¼šè·å–è§†é¢‘åˆ—è¡¨**

**ä½ç½®ï¼š** line 461-465

```javascript
getVideoList() {
    // è°ƒç”¨APIè·å–è§†é¢‘åˆ—è¡¨
    this.$api.getVideoList({
        date: this.datearr[this.riindex].riqi,  // é€‰ä¸­çš„æ—¥æœŸ
        type: this.curNow,                       // tabç±»å‹ (0æˆ–1)
        goods_id: this.id                        // å•†å“ID
    }).then(res => {
        // ä¿å­˜è§†é¢‘åˆ—è¡¨
        this.videoList = res.data;
    });
}
```

**API æ¥å£ï¼š** `getVideoList`

**è¯·æ±‚å‚æ•°ï¼š**
```javascript
{
    date: "2024-10-15",  // å…·ä½“æ—¥æœŸ
    type: 0,             // 0=å•†å“æº¯æº, 1=ç²¾å½©ç¬é—´
    goods_id: "123"      // å•†å“ID
}
```

**è¿”å›æ•°æ®ï¼š**
```javascript
{
    code: 1,
    data: [
        {
            tag: "å…³é”®èŠ‚ç‚¹",
            title: "åŸæ–™æŠ•æ”¾",
            shichang: "00:05:30",
            s_time: "08:00",
            e_time: "08:30",
            liangdian: "ä¸¥æ ¼æŒ‰ç…§é…æ–¹æ¯”ä¾‹æŠ•æ”¾åŸæ–™",
            video_url: "http://example.com/video.mp4"
        },
        // ...æ›´å¤šè§†é¢‘
    ]
}
```

---

## ğŸ® äº¤äº’é€»è¾‘

### 1. åˆ‡æ¢ Tabï¼ˆå•†å“æº¯æº â†” ç²¾å½©ç¬é—´ï¼‰

**ä½ç½®ï¼š** line 439-441

```javascript
sectionChange(index) {
    this.curNow = index;      // æ›´æ–°å½“å‰tabç´¢å¼•
    this.getVideoList();      // é‡æ–°è·å–è§†é¢‘åˆ—è¡¨
}
```

**è§¦å‘æ–¹å¼ï¼š** ç”¨æˆ·ç‚¹å‡» tab æ ‡ç­¾

**æ•ˆæœï¼š**
- æ›´æ–° `curNow` å€¼ï¼ˆ0 æˆ– 1ï¼‰
- ä½¿ç”¨æ–°çš„ type å‚æ•°é‡æ–°è¯·æ±‚è§†é¢‘åˆ—è¡¨
- ä¿æŒå½“å‰é€‰ä¸­çš„æ—¥æœŸä¸å˜

### 2. åˆ‡æ¢æ—¥æœŸï¼ˆç‚¹å‡»æ—¥æœŸæŒ‰é’®ï¼‰

**ä½ç½®ï¼š** line 443-445

```javascript
xx(index) {
    this.riindex = index;     // æ›´æ–°é€‰ä¸­çš„æ—¥æœŸç´¢å¼•
    this.getVideoList();      // é‡æ–°è·å–è§†é¢‘åˆ—è¡¨
}
```

**è§¦å‘æ–¹å¼ï¼š** ç”¨æˆ·ç‚¹å‡»æ—¥æœŸæŒ‰é’®ï¼ˆline 97-100ï¼‰

**æ•ˆæœï¼š**
- æ›´æ–° `riindex` å€¼
- ä½¿ç”¨æ–°çš„æ—¥æœŸå‚æ•°é‡æ–°è¯·æ±‚è§†é¢‘åˆ—è¡¨
- ä¿æŒå½“å‰é€‰ä¸­çš„ tab ä¸å˜

### 3. é€‰æ‹©å¹´æœˆï¼ˆæ—¥å†å¼¹çª—ï¼‰

**ä½ç½®ï¼š** line 447-451

```javascript
changedate(e) {
    // è·å–æ–°æœˆä»½çš„æ—¥æœŸåˆ—è¡¨
    this.getDateList(e.result);

    // æ›´æ–°æ˜¾ç¤ºçš„å¹´æœˆ
    this.dy = e.year + "-" + e.month;

    // è·å–è§†é¢‘åˆ—è¡¨ï¼ˆåœ¨ getDateList ä¸­è‡ªåŠ¨è°ƒç”¨ï¼‰
    this.getVideoList();
}
```

**è§¦å‘æ–¹å¼ï¼š** ç”¨æˆ·åœ¨æ—¥å†ç»„ä»¶ä¸­é€‰æ‹©å¹´æœˆï¼ˆline 324ï¼‰

**æ•ˆæœï¼š**
- è°ƒç”¨ `getDateList` è·å–æ–°æœˆä»½çš„æ—¥æœŸåˆ—è¡¨
- æ›´æ–°å¹´æœˆæ˜¾ç¤º
- è‡ªåŠ¨è·å–ç¬¬ä¸€ä¸ªæ—¥æœŸçš„è§†é¢‘åˆ—è¡¨

### 4. æ’­æ”¾è§†é¢‘

**ä½ç½®ï¼š** line 430-437

```javascript
openVideo(i) {
    // è·³è½¬åˆ°è§†é¢‘æ’­æ”¾é¡µé¢
    uni.navigateTo({
        url: "/pages/video/video?url=" + this.videoList[i].video_url
    });
}
```

**è§¦å‘æ–¹å¼ï¼š** ç”¨æˆ·ç‚¹å‡»"ç‚¹å‡»å›æ”¾"æŒ‰é’®ï¼ˆline 126ï¼‰

**æ•ˆæœï¼š**
- è·³è½¬åˆ°è§†é¢‘æ’­æ”¾é¡µé¢
- ä¼ é€’è§†é¢‘URLå‚æ•°

---

## ğŸ”— API æ¥å£é…ç½®

### API å®šä¹‰ä½ç½®

**æ–‡ä»¶ï¼š** `cwlsuniapp/common/http.api.js`

### æ¥å£1ï¼šè·å–æ—¥æœŸåˆ—è¡¨

```javascript
vm.$api.getdateList = async (params = {}) =>
    await vm.$u.get('/addons/shop/api.goods/getDateList', params);
```

**åç«¯è·¯å¾„ï¼š** `/addons/shop/api.goods/getDateList`

### æ¥å£2ï¼šè·å–è§†é¢‘åˆ—è¡¨

```javascript
vm.$api.getVideoList = async (params = {}) =>
    await vm.$u.get('/addons/shop/api.goods/getVideoList', params);
```

**åç«¯è·¯å¾„ï¼š** `/addons/shop/api.goods/getVideoList`

---

## ğŸ¨ UI ç»„ä»¶è¯´æ˜

### 1. æ—¥å†é€‰æ‹©å™¨

**ä½ç½®ï¼š** line 324

```html
<u-calendar
    v-model="riqishow"
    @change="changedate"
    :arr="info.ri"
></u-calendar>
```

**åŠŸèƒ½ï¼š** é€‰æ‹©å¹´æœˆï¼Œè·å–è¯¥æœˆä»½çš„æ—¥æœŸåˆ—è¡¨

### 2. æ—¥æœŸæŒ‰é’®ç»„

**ä½ç½®ï¼š** line 96-101

```html
<view style="display: flex;justify-content: center;">
    <view
        :class="(index == riindex) ? 'dd ac' : 'dd'"
        v-for="(item, index) in datearr"
        @click="xx(index)"
    >
        {{item.txt}}<br>
        {{item.day}}
    </view>
</view>
```

**åŠŸèƒ½ï¼š** æ˜¾ç¤ºå¯é€‰æ—¥æœŸï¼Œç‚¹å‡»åˆ‡æ¢æ—¥æœŸ

### 3. Tab åˆ‡æ¢å™¨

**ä½ç½®ï¼š** line 103

```html
<u-subsection
    :list="list"
    active-color="#fff"
    buttonColor="#367bf7"
    mode="button"
    :current="curNow"
    @change="sectionChange"
></u-subsection>
```

**åŠŸèƒ½ï¼š** åˆ‡æ¢"å•†å“æº¯æº"å’Œ"ç²¾å½©ç¬é—´"

### 4. è§†é¢‘å¡ç‰‡åˆ—è¡¨

**ä½ç½®ï¼š** line 107-133

```html
<view class="item" v-for="(item, index) in videoList">
    <!-- æ ‡ç­¾å’Œæ—¶é•¿ -->
    <view class="head">
        <view class="tag">{{item.tag}}</view>
        <view class="title">{{item.title}}</view>
        <view class="duration">æ’­æ”¾æ—¶é•¿:{{item.shichang}}</view>
    </view>

    <!-- æ—¶é—´æ®µå’Œæ’­æ”¾æŒ‰é’® -->
    <view class="time-action">
        <view class="time">{{item.s_time}} - {{item.e_time}}</view>
        <view class="play-btn" @click="openVideo(index)">ç‚¹å‡»å›æ”¾</view>
    </view>

    <!-- äº®ç‚¹è¯´æ˜ -->
    <view class="highlight">äº®ç‚¹:{{item.liangdian}}</view>
</view>
```

**åŠŸèƒ½ï¼š** æ˜¾ç¤ºè§†é¢‘åˆ—è¡¨ï¼Œç‚¹å‡»æ’­æ”¾

---

## ğŸ“ å…³é”®ä»£ç ä½ç½®ç´¢å¼•

| åŠŸèƒ½ | ä»£ç ä½ç½® | è¯´æ˜ |
|------|---------|------|
| Tab é…ç½® | line 414 | å®šä¹‰ tab æ ‡ç­¾æ•°ç»„ |
| æ•°æ®çŠ¶æ€ | line 398-423 | å®šä¹‰æ‰€æœ‰æ•°æ®å˜é‡ |
| é¡µé¢åˆå§‹åŒ– | line 342-358 | onLoad ç”Ÿå‘½å‘¨æœŸ |
| è·å–æ—¥æœŸåˆ—è¡¨ | line 453-459 | getDateList æ–¹æ³• |
| è·å–è§†é¢‘åˆ—è¡¨ | line 461-465 | getVideoList æ–¹æ³• |
| åˆ‡æ¢ Tab | line 439-441 | sectionChange æ–¹æ³• |
| åˆ‡æ¢æ—¥æœŸ | line 443-445 | xx æ–¹æ³• |
| é€‰æ‹©å¹´æœˆ | line 447-451 | changedate æ–¹æ³• |
| æ’­æ”¾è§†é¢‘ | line 430-437 | openVideo æ–¹æ³• |
| æ—¥å†ç»„ä»¶ | line 324 | u-calendar ç»„ä»¶ |
| Tab ç»„ä»¶ | line 103 | u-subsection ç»„ä»¶ |
| è§†é¢‘åˆ—è¡¨ | line 107-133 | è§†é¢‘å¡ç‰‡æ¸²æŸ“ |

---

## ğŸ” æ•°æ®æµå‘å›¾

```
ç”¨æˆ·æ“ä½œ
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. é€‰æ‹©å¹´æœˆï¼ˆæ—¥å†ï¼‰                      â”‚
â”‚     â†“                                    â”‚
â”‚  changedate(e)                          â”‚
â”‚     â†“                                    â”‚
â”‚  getDateList(e.result)                  â”‚
â”‚     â†“                                    â”‚
â”‚  API: /api.goods/getDateList            â”‚
â”‚     â†“                                    â”‚
â”‚  datearr = res.data                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. é€‰æ‹©æ—¥æœŸï¼ˆç‚¹å‡»æ—¥æœŸæŒ‰é’®ï¼‰              â”‚
â”‚     â†“                                    â”‚
â”‚  xx(index)                              â”‚
â”‚     â†“                                    â”‚
â”‚  riindex = index                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. åˆ‡æ¢ Tabï¼ˆå•†å“æº¯æº/ç²¾å½©ç¬é—´ï¼‰         â”‚
â”‚     â†“                                    â”‚
â”‚  sectionChange(index)                   â”‚
â”‚     â†“                                    â”‚
â”‚  curNow = index                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. è·å–è§†é¢‘åˆ—è¡¨                          â”‚
â”‚     â†“                                    â”‚
â”‚  getVideoList()                         â”‚
â”‚     â†“                                    â”‚
â”‚  API: /api.goods/getVideoList           â”‚
â”‚  å‚æ•°ï¼š                                   â”‚
â”‚    - date: datearr[riindex].riqi       â”‚
â”‚    - type: curNow                       â”‚
â”‚    - goods_id: id                       â”‚
â”‚     â†“                                    â”‚
â”‚  videoList = res.data                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5. æ’­æ”¾è§†é¢‘                              â”‚
â”‚     â†“                                    â”‚
â”‚  openVideo(index)                       â”‚
â”‚     â†“                                    â”‚
â”‚  è·³è½¬åˆ° /pages/video/video              â”‚
â”‚  ä¼ é€’å‚æ•°ï¼šurl=videoList[i].video_url   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš™ï¸ é…ç½®è¯´æ˜

### é»˜è®¤å€¼é…ç½®

```javascript
riindex: 3,         // é»˜è®¤é€‰ä¸­ç¬¬4ä¸ªæ—¥æœŸï¼ˆç´¢å¼•ä»0å¼€å§‹ï¼‰
curNow: 0,          // é»˜è®¤æ˜¾ç¤º"å•†å“æº¯æº"
dy: "2024-10",      // é»˜è®¤å¹´æœˆï¼ˆä¼šåœ¨ onShow ä¸­æ›´æ–°ä¸ºå½“å‰å¹´æœˆï¼‰
```

### å¹´æœˆåˆå§‹åŒ–

**ä½ç½®ï¼š** line 364-370

```javascript
onShow() {
    // è·å–å½“å‰å¹´ä»½
    const currentYear = new Date().getFullYear();

    // è·å–å½“å‰æœˆä»½ï¼ˆéœ€è¦åŠ 1ï¼‰
    const currentMonth = new Date().getMonth() + 1;

    // æ›´æ–°æ˜¾ç¤ºçš„å¹´æœˆ
    this.dy = currentYear + "-" + currentMonth;
}
```

---

## ğŸ› æ³¨æ„äº‹é¡¹

### 1. æ—¥æœŸç´¢å¼•é—®é¢˜

- `riindex` é»˜è®¤å€¼ä¸º 3ï¼Œè¡¨ç¤ºé»˜è®¤é€‰ä¸­ç¬¬4ä¸ªæ—¥æœŸ
- å¦‚æœ `datearr` é•¿åº¦å°äº 4ï¼Œå¯èƒ½å¯¼è‡´æ•°ç»„è¶Šç•Œ
- å»ºè®®åœ¨ `getDateList` å›è°ƒä¸­æ£€æŸ¥æ•°ç»„é•¿åº¦

### 2. API è°ƒç”¨æ—¶æœº

- `getVideoList` ä¼šåœ¨å¤šä¸ªåœ°æ–¹è¢«è°ƒç”¨ï¼š
  - `getDateList` å›è°ƒä¸­
  - `sectionChange` ä¸­
  - `xx` ä¸­
  - `changedate` ä¸­
- éœ€è¦ç¡®ä¿ `datearr` å·²ç»æœ‰æ•°æ®ï¼Œå¦åˆ™ä¼šæŠ¥é”™

### 3. æ•°æ®ä¾èµ–å…³ç³»

```
goods_id (å•†å“ID)
    â†“
datearr (æ—¥æœŸåˆ—è¡¨)
    â†“
riindex (é€‰ä¸­çš„æ—¥æœŸç´¢å¼•)
    â†“
curNow (tabç±»å‹)
    â†“
videoList (è§†é¢‘åˆ—è¡¨)
```

æ‰€æœ‰æ•°æ®è·å–éƒ½ä¾èµ–äº `goods_id`ï¼Œå¦‚æœ ID ä¸ºç©ºï¼Œæ•´ä¸ªæµç¨‹æ— æ³•è¿›è¡Œã€‚

---

## ğŸ“š ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `cwlsuniapp/pages/goods/detail.vue` | å•†å“è¯¦æƒ…é¡µä¸»æ–‡ä»¶ |
| `cwlsuniapp/common/http.api.js` | API æ¥å£å®šä¹‰ |
| `cwlsuniapp/pages/video/video.vue` | è§†é¢‘æ’­æ”¾é¡µé¢ |
| `kcbg/addons/shop/controller/api/Goods.php` | åç«¯ API æ§åˆ¶å™¨ |

---

## ğŸ”„ æ›´æ–°è®°å½•

| æ—¥æœŸ | ç‰ˆæœ¬ | è¯´æ˜ |
|------|------|------|
| 2026-02-05 | v1.0 | åˆå§‹ç‰ˆæœ¬ï¼Œå®Œæ•´åˆ†æå•†å“æº¯æºè§†é¢‘åŠŸèƒ½ |

---

**æ–‡æ¡£ç»´æŠ¤è€…ï¼š** Claude Code
**æœ€åæ›´æ–°ï¼š** 2026å¹´2æœˆ5æ—¥
